# 권한 지옥(Permission Hell) 탈출: 능동적 건강 검진 기술

맥(Mac) 사용자라면 누구나 겪어봤을 답답한 경험이 있습니다.
어제까지 잘 되던 앱이 갑자기 작동하지 않고, "권한이 없습니다"라는 딱딱한 에러 메시지만 뱉거나 아예 먹통이 되어버리는 상황.
바로 macOS의 엄격한 보안 정책과 앱 업데이트가 충돌하여 생기는 **"권한 지옥(Permission Hell)"**입니다.

대부분의 앱은 이 문제를 사용자에게 떠넘깁니다. *"설정 가서 권한 줬는지 확인해보세요"*라는 식이죠.
**HookLink는 다릅니다. 우리는 앱이 아프기 전에 미리 진단하고 처방합니다.**

---

## 1. 기존 방식의 문제점: "소 잃고 외양간 고치기"

Hookmark 같은 기존 앱들은 **"수동적(Reactive)"**입니다.
1. 사용자가 기능을 실행합니다.
2. 실패합니다 (권한 없음).
3. 에러를 띄웁니다.
4. 사용자는 당황하며 구글링을 하거나 앱을 지워버립니다.

이 방식은 사용자 경험(UX) 최악의 시나리오입니다.

## 2. HookLink의 해결책: "능동적 건강 검진 (Proactive Health Check)"

HookLink는 앱이 실행되는 순간, 그리고 백그라운드에서 주기적으로 **자신의 건강 상태를 스스로 진단**합니다.
우리는 macOS의 `Accessibility API`를 직접 호출하여 권한 상태를 마이크로초(µs) 단위로 체크합니다.

### 작동 원리
*   **실시간 모니터링:** 앱을 켜자마자 macOS 커널에게 직접 묻습니다. *"나 지금 다른 앱 제어할 수 있어?"*
    *   API: `AXIsProcessTrusted()`
*   **사전 경고 (Pre-warning):** 권한이 풀렸다면, 사용자가 링크를 클릭해서 실패를 맛보기 **전에**, 메인 화면에 *"⚠️ 권한 복구가 필요합니다"*라는 배너를 미리 띄웁니다.
*   **원클릭 복구 (One-Click Fix):** "복구하기" 버튼을 누르면, 사용자가 시스템 설정을 찾아 헤맬 필요 없이, HookLink가 정확한 설정 창을 띄워주고 체크를 유도합니다.

## 3. 기술적 디테일 (Engineering)

이 기능은 단순해 보이지만, macOS의 깊은 곳(`ApplicationServices.framework`, `AppleEvents`)을 건드리는 정교한 기술입니다.

### Accessibility & Automation Check
*   **Native Rust Implementation:** 무거운 Electron 플러그인을 쓰지 않고, Rust 언어로 Core Foundation을 직접 제어하여 성능 저하가 전혀 없습니다 (Zero Overhead).
*   **Automation Privilege Probe:** '자동화 권한'은 확인하기 까다롭지만, HookLink는 Finder에게 무해한 더미 명령(`tell application "Finder" to get name of startup disk`)을 보내 권한 유무를 정확히 판별해냅니다.

## 요약

| 기능 | 기존 앱 (Hookmark 등) | HookLink |
| :--- | :--- | :--- |
| **진단 시점** | 기능 실행 후 (에러 발생 시) | **기능 실행 전 (사전 예방)** |
| **에러 처리** | "권한이 없습니다" (사용자 책임) | **"이 버튼을 누르면 해결됩니다" (앱 책임)** |
| **성능** | 느린 스크립트 실행 | **Rust 기반 초고속 네이티브 호출** |

**HookLink는 당신에게 "안 되는 이유"를 설명하지 않습니다. 그냥 "되게" 만듭니다.**
